# import cv2

# cap = cv2.VideoCapture(0)

# # Check if the webcam is opened correctly
# if not cap.isOpened():
#     raise IOError("Cannot open webcam")

# while True:
#     ret, frame = cap.read()
#     frame = cv2.resize(frame, None, fx=0.5, fy=0.5, interpolation=cv2.INTER_AREA)
#     cv2.imshow('Input', frame)

#     c = cv2.waitKey(1)
#     if c == 27:
#         break

# cap.release()
# cv2.destroyAllWindows()




import cv2

classifier=cv2.CascadeClassifier("code.xml")

def detect(img):
    global classifier

    grayscale=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
 
    h,w=grayscale.shape
    size=min(h,w)
    nscale=size/200

    if nscale>1:
        grayscale=cv2.resize(grayscale,((w//nscale),(h//nscale)))
    
   
    zone = classifier.detectMultiScale(
    grayscale,
    scaleFactor=1.2,
    minNeighbors=5,
    minSize=(30, 30),
    flags = cv2.CASCADE_SCALE_IMAGE)
    
    
    if nscale<=1:
        return zone
    return[(int(x*nscale),int(y*nscale),int(rw*nscale),int(rh*nscale)) for (x,y,rw,rh) in zone]
